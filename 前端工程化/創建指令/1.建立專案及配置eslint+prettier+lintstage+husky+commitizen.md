
# 建立專案

```
npx create-vite . --template react-ts
```

## 配置eslint+prettier+lintstage+husky+commitizen

### 修改 package.json

```json
,
	//package.json "type": "module"刪掉這行加入下面
  "lint-staged": {
    "*.{js,jsx,ts,tsx,vue,json}": [
      "eslint --fix ."
    ]
  },
  "config": {
    "commitizen": {
      "path": "node_modules/cz-customizable"
    }
  }
```

### 安裝及新增文件
```bash
npm install
npm install --save-dev  eslint-plugin-prettier eslint prettier eslint-plugin-import eslint-plugin-react eslint-plugin-jsx-a11y eslint-plugin-react-hooks eslint-config-react-app @typescript-eslint/eslint-plugin @typescript-eslint/parser husky lint-staged commitizen commitlint cz-customizable commitlint-config-cz @commitlint/config-conventional 

git init
git add .
git commit -m "init"
npm set-script dev "vite --mode development"
npm set-script prod "vite --mode production"
npm set-script build "vite build --mode production && tsc"
npm set-script lint "eslint src --ext ts,tsx --report-unused-disable-directives --max-warnings 0"
npm set-script prepare "husky install"
npm set-script commit "git-cz"
npm set-script commit:all "git add . && git-cz"
npm run prepare
npx husky add .husky/pre-commit "npx lint-staged --allow-empty"
npx husky add .husky/commit-msg 'npx --no-install commitlint --edit "$1"'

echo "module.exports = {
  extends: ['cz'],
  rules: {},
}" > commitlint.config.js;

echo $'module.exports = {
  types: [
    { value: "\U0001F680 新增", name: "新增: 新的內容" },
    { value: "\U0001F41B 修復", name: "修復: 修復一個錯誤" },
    { value: "\U0001F4DD 文檔", name: "文檔: 變更的只有文檔" },
    { value: "\U0001F3E0 格式", name: "格式: 空格, 分號等格式修復" },
    { value: "\u267B\ufe0f 重構", name: "重構: 代碼重構，注意和特性、修復區分開" },
    { value: "\u26A1\ufe0f 性能", name: "性能: 提升性能" },
    { value: "\u2705 測試", name: "測試: 添加一個測試" },
    { value: "\U0001F528 工具", name: "工具: 開發工具變動(構建、腳手架工具等)" },
    { value: "\u23EA 回滾", name: "回滾: 代碼回退" },
  ],
  scopes: [],
  messages: {
    type: "選擇一種你的提交類型: \\n",
    scope: "選擇一個 scope（可選）\\n：",
    customScope: "請輸入修改範圍(可選): \\n",
    subject: "短說明: \\n",
    body: "長說明，使用\"|\" 換行(可選)：\\n",
    breaking: "非兼容性說明(可選): \\n",
    footer: "關聯關閉的 issue，例如：#31, #34(可選): \\n",
    confirmCommit: "確定提交說明? \\n",
  },
  skipEmptyScopes: true,
  skipQuestions: ["scopes", "breaking", "body", "footer"],
  allowCustomScopes: true,
  allowBreakingChanges: ["feat", "fix"],
};' > .cz-config.js;

echo "module.exports = {
  extends: [
    'react-app',
    'eslint:recommended',
    'plugin:@typescript-eslint/recommended',
  ],
  plugins: ['prettier', 'react-hooks', '@typescript-eslint'],
  parser: '@typescript-eslint/parser',
  rules: {
    'prettier/prettier': 'warn',
    'react-hooks/rules-of-hooks': 'error',
    'react-hooks/exhaustive-deps': 'warn',
  },
};" > .eslintrc.cjs;

echo "dist/
node_modules/
src/serviceWorker.js
.cz-config.js
tsconfig.json
package.json" > .eslintignore;

echo "module.exports = {
  singleQuote: true,
  trailingComma: 'es5',
  semi: false,
  endOfLine: 'auto',
}" > .prettierrc.cjs;

echo "package-lock.json
node_modules/" > .prettierignore;

echo "VITE_APP_BASE_API=production_base_api" > .env.production
echo "VITE_APP_BASE_API=development_base_api" > .env.development


```
