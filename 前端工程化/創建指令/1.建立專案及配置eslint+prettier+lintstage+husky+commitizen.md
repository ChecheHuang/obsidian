
# 建立專案

```
npx create-vite . --template react-ts
npm install
```


## 配置eslint+prettier

``` bash
npm install --save-dev @typescript-eslint/eslint-plugin @typescript-eslint/parser eslint eslint-config-prettier eslint-plugin-import eslint-plugin-jsx-a11y eslint-plugin-prettier eslint-plugin-react eslint-plugin-react-hooks prettier

echo '{
  "env": {
    "es6": true,
    "browser": true,
    "node": true
  },
  "extends": [
    "eslint:recommended",
    "plugin:react/recommended",
    "plugin:react/jsx-runtime",
    "plugin:import/typescript",
    "plugin:jsx-a11y/recommended",
    "plugin:@typescript-eslint/eslint-recommended",
    "plugin:@typescript-eslint/recommended",
    "plugin:@typescript-eslint/recommended-requiring-type-checking",
    "plugin:prettier/recommended"
  ],
  "parser": "@typescript-eslint/parser",
  "plugins": [
    "react",
    "@typescript-eslint",
    "import",
    "jsx-a11y",
    "react-hooks",
    "prettier"
  ],
  "parserOptions": {
    "ecmaFeatures": {
      "jsx": true
    },
    "ecmaVersion": "latest",
    "sourceType": "module",
    "tsconfigRootDir": ".",
    "project": [
      "./tsconfig.json"
    ]
  },
  "settings": {
    "react": {
      "version": "detect"
    },
    "import/resolver": {
      "node": {
        "paths": [
          "src"
        ],
        "extensions": [
          ".js",
          ".jsx",
          ".ts",
          ".tsx"
        ]
      }
    }
  },
  "rules": {
    // ts
    "@typescript-eslint/no-explicit-any": "warn",
    "@typescript-eslint/no-non-null-assertion": "off",
    "no-unused-vars": "off",
    "@typescript-eslint/no-unused-vars": "error",
    // react 
    "react/jsx-uses-vars": "error",
    "react/jsx-uses-react": "error",
    "react/prop-types": "off",
    "react/function-component-definition": "off",
    "react/react-in-jsx-scope": "off",
    // react hooks
    "react-hooks/rules-of-hooks": "warn",
    "react-hooks/exhaustive-deps": "warn",
    // prettier
    "prettier/prettier": "warn"
  }
}' > .eslintrc.json;


echo 'node_modules/
dist/
env.d.ts
.cz-config.js
commitlint.config.js
package.json
vite.config.ts' > .eslintignore;

echo 'node_modules/
dist/
env.d.ts' > .prettierignore;

echo '{
  "semi": false,
  "singleQuote": true,
  "endOfLine": "auto"
}' > .prettierrc.json;

```

### 安裝及新增文件

### lintstage+husky+commitizen
```bash

npm install --save-dev husky lint-staged commitizen commitlint cz-customizable commitlint-config-cz @commitlint/config-conventional 

git init
git add .
git commit -m "init"
npm pkg set scripts.dev="vite --mode development"
npm pkg set scripts.prod="vite --mode production"
npm pkg set scripts.build="vite build --mode production && tsc"
npm pkg set scripts.lint="eslint src --ext ts,tsx --report-unused-disable-directives --max-warnings 0"
npm pkg set scripts.prepare="husky install"
npm pkg set scripts.cm="git-cz"
npm pkg set scripts.cma="git add . && git-cz"
npm run prepare
npx husky add .husky/pre-commit "npx lint-staged --allow-empty"
npx husky add .husky/commit-msg 'npx --no-install commitlint --edit "$1"'

echo "module.exports = {
  extends: ['cz'],
  rules: {},
}" > commitlint.config.js;

echo $'module.exports = {
  types: [
    { value: "\U0001F680 新增", name: "新增: 新的內容" },
    { value: "\U0001F41B 修復", name: "修復: 修復一個錯誤" },
    { value: "\U0001F4DD 文檔", name: "文檔: 變更的只有文檔" },
    { value: "\U0001F3E0 格式", name: "格式: 空格, 分號等格式修復" },
    { value: "\u267B\ufe0f 重構", name: "重構: 代碼重構，注意和特性、修復區分開" },
    { value: "\u26A1\ufe0f 性能", name: "性能: 提升性能" },
    { value: "\u2705 測試", name: "測試: 添加一個測試" },
    { value: "\U0001F528 工具", name: "工具: 開發工具變動(構建、腳手架工具等)" },
    { value: "\u23EA 回滾", name: "回滾: 代碼回退" },
  ],
  scopes: [],
  messages: {
    type: "選擇一種你的提交類型: \\n",
    scope: "選擇一個 scope（可選）\\n：",
    customScope: "請輸入修改範圍(可選): \\n",
    subject: "短說明: \\n",
    body: "長說明，使用\"|\" 換行(可選)：\\n",
    breaking: "非兼容性說明(可選): \\n",
    footer: "關聯關閉的 issue，例如：#31, #34(可選): \\n",
    confirmCommit: "確定提交說明? \\n",
  },
  skipEmptyScopes: true,
  skipQuestions: ["scopes", "breaking", "body", "footer"],
  allowCustomScopes: true,
  allowBreakingChanges: ["feat", "fix"],
};' > .cz-config.js;


echo "VITE_APP_BASE_API=production_base_api" > .env.production
echo "VITE_APP_BASE_API=development_base_api" > .env.development
```

### 修改 package.json

```json
,
	//package.json "type": "module"刪掉這行加入下面
  "lint-staged": {
    "*.{js,jsx,ts,tsx,vue,json}": [
      "eslint --fix ."
    ]
  },
  "config": {
    "commitizen": {
      "path": "node_modules/cz-customizable"
    }
  }
```

```
//如果要自動推送
npx husky add .husky/post-commit 'git push'
```
